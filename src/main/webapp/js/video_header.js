var HeaderVideo=(function(a,g){var o={container:a(".header-video"),header:a(".header-video--media"),videoTrigger:a("#video-trigger"),videoCloseTrigger:a("#video-close-trigger"),teaserVideo:a("#teaser-video"),autoPlayVideo:false};var i=function(p){o=a.extend(o,p);h();n();d();o.videoCloseTrigger.hide();if(videoDetails.teaser){c()}if(o.autoPlayVideo){b()}};var h=function(){videoDetails={id:o.header.attr("data-video-src"),teaser:o.header.attr("data-teaser-source"),provider:o.header.attr("data-provider").toLowerCase(),videoHeight:o.header.attr("data-video-height"),videoWidth:o.header.attr("data-video-width")};return videoDetails};var n=function(){o.container.data("aspectRatio",videoDetails.videoHeight/videoDetails.videoWidth);a(window).resize(function(){var q=a(window).width(),p=a(window).height();o.container.width(q).height(q*o.container.data("aspectRatio"));if(p<o.container.height()){o.container.width(q).height(p)}}).trigger("resize")};var d=function(){o.videoTrigger.on("click",function(p){p.preventDefault();b();o.videoCloseTrigger.fadeIn()});o.videoCloseTrigger.on("click",function(p){p.preventDefault();k()})};var c=function(){if(Modernizr.video&&!j()){var q=videoDetails.teaser,p='<video autoplay="true" loop="loop" muted id="teaser-video" class="teaser-video"><source src="'+q+'.mp4" type="video/mp4"><source src="'+q+'.ogv" type="video/ogg"></video>';o.container.append(p)}};var e=function(){if(videoDetails.provider==="youtube"){var p='<iframe id="video" src="http://www.youtube.com/embed/'+videoDetails.id+'?rel=0&amp;hd=1&autohide=1&showinfo=0&autoplay=1&enablejsapi=1&origin=*" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'}else{if(videoDetails.provider==="vimeo"){var p='<iframe id="video" src="http://player.vimeo.com/video/'+videoDetails.id+'?title=0&amp;byline=0&amp;portrait=0&amp;color=3d96d2&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'}else{if(videoDetails.provider==="html5"){var p='<video autoplay="true" loop="loop" id="video"><source src="'+videoDetails.id+'.mp4" type="video/mp4"><source src="'+videoDetails.id+'.ogv" type="video/ogg"></video>'}}}return p};var b=function(){o.header.hide();o.container.append(e());l();o.teaserVideo.hide()};var k=function(){a("#video").remove();o.teaserVideo.fadeIn();f();m()};var l=function(){if(o.videoTrigger){o.videoTrigger.fadeOut("slow")}};var f=function(){if(o.videoTrigger){o.videoTrigger.fadeIn("slow")}};var m=function(){o.videoCloseTrigger.hide()};var j=function(){if(a(window).width()<900&&Modernizr.touch){return true}else{return false}};return{init:i}})(jQuery,document);